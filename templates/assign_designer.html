{% extends "layout.html" %}

{% block title %}Tetapkan Designer{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h2">Tetapkan Pereka Bentuk (Designer)</h1>
</div>

<div class="card shadow-sm">
    <div class="card-header">
        <h5 class="mb-0">Pesanan #{{ pesanan.id }} - {{ pesanan.nama_pelanggan }}</h5>
    </div>
    <div class="card-body">
        <p class="card-text">
            Sila pilih seorang pereka bentuk untuk ditugaskan bagi pesanan ini. Setelah ditetapkan, status pesanan akan dikemas kini secara automatik kepada "Design Dalam Proses".
        </p>
        <hr>
        <form method="POST" action="{{ url_for('assign_designer', pesanan_id=pesanan.id) }}">
            <div class="mb-3">
                <label for="designer_username" class="form-label fw-bold">Pilih Pereka Bentuk:</label>
                <select name="designer_username" id="designer_username" class="form-select form-select-lg" required>
                    <option value="" disabled selected>--- Pilih dari senarai ---</option>
                    {% for designer in designers %}
                        <option value="{{ designer.username }}" 
                                {% if pesanan.designer_username == designer.username %}selected{% endif %}>
                            {{ designer.nama }} ({{ designer.username }})
                        </option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="mt-4">
                <button type="submit" class="btn btn-primary"><i class="fas fa-check-circle me-2"></i>Tetapkan & Mula Proses</button>
                <a href="{{ url_for('urus_pesanan') }}" class="btn btn-secondary">Kembali ke Senarai Pesanan</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}